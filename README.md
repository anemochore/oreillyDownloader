# oreillyHack

## 역사...?
1. 오라일리 인하우스 html(asciidoc을 뭔가로 변환한 요상한 형태)을 편집 시 보기 쉬운 형태로 바꿔 로컬 브라우저에서 편하게 보려고 만듦.
2. 오라일리에서 asciidoc만 주는 경우가 생겨 Asciidoctor.js로 직접 변환한 html도 지원하게 함.
3. 오라일리에서 데이터를 늦게 주는 일이 생겨 역자에게 사파리에서 파일을 받아서 주기 위해 스크레이퍼를 만듦.
4. 근데 보니까 오라일리 사파리에서 서비스하는 html은 유효한 데다가 넘버링도 훌륭함(배신감).
5. 그래서 그냥 스크레이퍼와 html 꾸며주는 코드를 합쳐서 이게 탄생.
6. 러닝 오라일리 사이트 개편으로 업데이트 중단.
7. 레이지 로딩 다시 처리하게 바꾸고 jpub 사용자에게만 재오픈(22-5-5)

## 사용법
오라일리 사파리에 로그인 후 도서 메인 페이지(https://learning.oreilly.com/library/view/TITLE/ISBN/ 같은 주소)에서 [북마클릿](https://anemochore.github.io/oreillyHack/safari-dl-bml.min.js) 실행. 오라일리에서 출판한 책만 지원.

## 서드파티 라이선스
여러 파일을 하나로 다운로드하기 위해 JSZip 불러다 씀: MIT/GPLv3 이중 라이선스.

## 현 버전 알려진 문제
- 매닝이나 와일리 등은 NOTE, TIP, WARNING 등 구분 없이 모두 NOTE 스타일.

## 주요 업데이트 내역
- 2018-7-10 첫 커밋
- 2018-7-11 팁, 노트, 경고, 박스 지원 추가.
- 2018-8-14 각주 요소 스타일 추가(안 예쁨 흑).
- 2018-9-3 원서에서 sect2가 잘못 들어간 책(뭐였지?) 수동으로 지원하게 수정. warning 말고 caution 요소도 스타일 추가.
- 2018-9-11 목차 기능 추가.
- 2018-12-11 목차에 파트 기능 추가.

- 2019-2-19 2번 파일(텍 추출)의 사파리 적용 버전 추가.
- 2019-3-22 'Optimizing Java' 지원 추가(=예외 사항에 대한 지원을 추가ㅠㅠ).
- 2019-4-3 파트 처리 버그 수정.
- 2019-5-23 iframe 버그 수정.
- 2019-6-24 'Think Julia' 지원(...) 추가.
- 2019-7-19 서문 지원 추가. 찾아보기 요소 인식 버그 수정.
- 2019-10-9 원서에 코드가 없는 책(Cybersecurity Ops with bash)은 깃허브에서 코드를 가져오는 애드온 추가(addon1....js).
- 2019-12-23 Asciidoctorjs로 변환한 html 지원 추가.
- 2019-12-27 수식, 예제, 그림, 표 목차 추가.

- 2020-1-6 safari-dl로 받은 html 지원 추가.
- 2020-1-13 safari-dl 공개. 기존 파일은 삭제.
- 2020-1-16 css와 박스 동물 그림도 로컬로 저장 / mathjax 스크립트 추가
- 2020-1-21 병렬 처리(프라미스 올)로 다운로드 속도 향상
- 2020-1-22 파폭에서는 MathJax 사용하지 않게 하고 math 태그 약간 수정해서 잘 보이게 함.
- 2020-2-14 스플래시 박스 추가
- 2020-2-21 팩트 책 지원(표나 수식 및 캡션이 있는 책은 테스트해야)
- 2020-3-11 에이프레스 책 지원(수식이 있는 책은 테스트해야)
- 2020-3-16 맥그로힐 책 지원(역시 테스트는 좀 필요)
- 2020-4-8 이미지로 된 코드 번호를 텍스트로 변환하는 애드온 추가(addon_ convert....js). 기존 애드온은 삭제.
- 2020-7-31 'Learning SQL, 3rd ed' 및 'Chaos Engineering' 지원 추가(2단계 제목 밑에 1단계 제목이 잘못 들어간 책. 혹은 그 반대).
- 2020-10-13 'Semantic Modeling for Data' 지원 추가(비블로그래피 내부 링크가 있는 책).
- 2020-11-16 'Foundations for Analytics with Python' 지원 추가 및 1단계 제목 밑에 2단계 제목이 잘못 들어간 책 바꾸는 걸 더 엄격히.
- 2020-11-19 팩트 'Hands-On Machine Learning with scikit-learn and Scientific Python Toolkits' 지원 추가
- 2020-11-30 매닝 도서 지원 추가(테스트는 필요)
- 2020-12-3 와일리 도서 지원 추가(테스트는 필요)
- 2020-12-4 팩트 'Hands-On Gradient Boosting with XGBoost and scikit-learn' 지원 추가

- 2021-1-9 오라일리 'Practical Time Series Analysis' 지원 추가(수식 추출 오류)

## todo
1. ~~각주(footnote)에 표시 및 감추기 버튼 달기~~ -> 마우스오버 시 오버레이 출력 적용 완료
2. 오라일리 외 출판사 책도 가져오게 해보면 어떨까? -> 팩트, 에이프레스, 맥그로힐, 매닝, 와일리 책 추가. 더??
3. ~~프라미스 올 사용해서 리팩터링.~~ -> 20/1/21 반영
4. 목차 클릭 시 해당 요소 하이라이트(인라인 수식 등을 보기 편하게)
5. 이미지 클릭 시 확대가 되면 좋을 듯.
6. 오라일리 팁 박스 등에 텍스트 넣기.
